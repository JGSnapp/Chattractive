# Chattractive

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Telegram‚Äë–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ–± –ò–¢–ú–û, –∏—Å–ø–æ–ª—å–∑—É—è –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∏–∑ –ø–∞–ø–∫–∏ `data`. –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ (–æ—Ç–≤–µ—Ç—ã –æ—Ç Gemini), —Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º –æ–±—â–µ–Ω–∏—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≥–æ–ª–æ—Å–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–∏ Chatterbox.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìö **RAG-–ø–∞–π–ø–ª–∞–π–Ω**: –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏–∑ `data`, –∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ Gemini.
- üí¨ **–î–∏–∞–ª–æ–≥ —Å –ø–∞–º—è—Ç—å—é**: –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ SQLite –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤.
- üë®‚Äçüë©‚Äçüëß **–†—É—á–Ω–æ–π —Ä–µ–∂–∏–º**: —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å—ã–ª–∞—é—Ç—Å—è –≤ –≥—Ä—É–ø–ø—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤, –æ—Ç–≤–µ—Ç—ã –∏–∑ –≥—Ä—É–ø–ø—ã –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–≤–∫–ª—é—á–∞—è –≥–æ–ª–æ—Å–æ–≤—ã–µ).
- üîä **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –±–æ—Ç –º–æ–∂–µ—Ç –æ–∑–≤—É—á–∏–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `app/audio` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- üßπ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–∏–∞–ª–æ–≥–∞, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ –∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install --upgrade pip
   pip install -e .
   ```

2. **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

   ```bash
   cp env.example .env
   ```

   –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

   - `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.
   - `GOOGLE_API_KEY` ‚Äî –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ Gemini.
   - `ADMIN_GROUP_ID` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä Telegram-–≥—Ä—É–ø–ø—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.

   –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

   - `DATA_DIRECTORY` ‚Äî –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å —Ç–µ–∫—Å—Ç–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `data`).
   - `DATABASE_PATH` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `chattractive.db`).
   - `GEMINI_MODEL` ‚Äî –º–æ–¥–µ–ª—å Gemini (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `gemini-2.0-flash-exp`).
   - `AUDIO_MODEL_DIR` - ??????? ? ?????? Chatterbox (?? ????????? ./models).
   - `VOICE_DEVICE` - ?????????? ??? ????????? ????? (`cpu`, `cuda` ? ?.?.).
   - `VOICE_LANGUAGE` - ???????? ??? ??? ??????? (????????, `ru`, `en`).


3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞–ø–∫—É `data/`** —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ (`.txt`, `.md`, `.rst`) —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**:

   ```bash
   python load_model.py  # downloads Chatterbox multilingual TTS weights if missing
   python main.py
   ```

By default multilingual weights are cached in ./models; keep AUDIO_MODEL_DIR unset to reuse that folder automatically.
Supported language ids include: ar, da, de, el, en, es, fi, fr, he, hi, it, ja, ko, ms, nl, no, pl, pt, ru, sv, sw, tr, zh.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- `app/AI/knowledge_base.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–æ–∏—Å–∫ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π.
- `app/AI/chat_service.py` ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –≤—ã–∑–æ–≤—ã Gemini.
- `app/db/storage.py` ‚Äî –ø—Ä–æ—Å—Ç–æ–π —Å–ª–æ–π —Ä–∞–±–æ—Ç—ã —Å SQLite.
- `app/bot/bot.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π Telegram –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞–º–∏.
- `app/audio/voice_service.py` ‚Äî –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ Chatterbox TTS.
- `main.py` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Å–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

## –ì–æ–ª–æ—Å–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã

–ú–æ–¥—É–ª—å `VoiceSynthesizer` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Chatterbox. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∫–∞—á–∞–π—Ç–µ –≤–µ—Å–∞ –º–æ–¥–µ–ª–∏ –∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –≤ `AUDIO_MODEL_DIR`. –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–º.

## –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º

–ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä—É—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ—Å—ã–ª–∞—é—Ç—Å—è –≤ –≥—Ä—É–ø–ø—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (`ADMIN_GROUP_ID`). –û—Ç–≤–µ—Ç—ã –∏–∑ —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ —Ä–µ–∂–∏–º–µ ¬´–æ—Ç–≤–µ—Ç–∏—Ç—å¬ª, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–µ–∫—Å—Ç, –≥–æ–ª–æ—Å–æ–≤—ã–µ –∏ –ª—é–±—ã–µ –≤–ª–æ–∂–µ–Ω–∏—è.

## –°–±—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏

–ù–∞–∂–º–∏—Ç–µ ¬´üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫¬ª, —á—Ç–æ–±—ã –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞. –ó–∞–ø–∏—Å–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∏ –¥–∏–∞–ª–æ–≥ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ.

---

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ –Ω–∞ –±–∞–∑–µ Gemini. –†–∞—Å—à–∏—Ä—è–π—Ç–µ –∏ –¥–æ–ø–æ–ª–Ω—è–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥ —Å–≤–æ–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏.



